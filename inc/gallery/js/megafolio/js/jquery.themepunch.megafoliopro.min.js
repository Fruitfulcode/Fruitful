/**************************************************************************
 * jquery.themepunch.megafolio.js - jQuery Plugin for megafolio pro gallery
 * @version: 1.0 (10.01.2013)
 * @requires jQuery v1.4 or later
 * @author Krisztian Horvath
**************************************************************************/


(function(e,t){function n(t,n){t.find(">.mega-entry").each(function(){var r=e(this);r.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");r.addClass("tp-notordered").addClass("mega-entry-added");r.wrapInner('<div class="mega-entry-innerwrap"></div>');var i=r.find(".mega-entry-innerwrap");i.css({background:"url("+r.data("src")+")",backgroundPosition:"50% 49%",backgroundSize:"cover","background-repeat":"no-repeat"});r.find(".mega-show-more").each(function(){var i=e(this);i.data("entid",r.attr("id"));i.click(function(){var r=e(this);var i=t.find("#"+r.data("entid"));i.addClass("mega-in-detailview");n.detailview="on"})})})}function r(t,n){t.find(">.mega-entry-added").each(function(r){var i=e(this);if(!i.hasClass("tp-layout")){i.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");i.addClass("tp-notordered");i.wrapInner('<div class="mega-entry-innerwrap"></div>');var s=i.find(".mega-entry-innerwrap");s.css({background:"url("+i.data("src")+")",backgroundPosition:"50% 49%",backgroundSize:"cover","background-repeat":"no-repeat"});i.find(".mega-show-more").each(function(){var r=e(this);r.data("entid",i.attr("id"));r.click(function(){var r=e(this);var i=t.find("#"+r.data("entid"));i.addClass("mega-in-detailview");n.detailview="on"})})}})}function i(t){t.find(">.mega-entry.tp-layout").each(function(){var t=e(this);t.removeClass("tp-layout").addClass("tp-notordered")})}function s(n,r){var i=n.data("ie");var s=n.data("ie9");var o=n.data("opt");if(o.filterChangeSpeed==t)o.filterChangeSpeed=Math.round(Math.random()*500+100);o.filter=r;var u=1;var a=1;n.find(">.mega-entry").each(function(n){var u=e(this);var f=o.filterChangeRotate;if(f==t)f=30;if(f==99)f=Math.round(Math.random()*50-25);u.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");if(u.hasClass(r)||r=="*"){u.removeClass("tp-layout").addClass("tp-notordered")}else{u.removeClass("tp-ordered").removeClass("tp-layout");setTimeout(function(){if(i||s){u.animate({scale:0,opacity:0},{queue:false,duration:o.filterChangeSpeed})}else{if(o.filterChangeAnimation=="fade"){u.transition({scale:1,opacity:0,rotate:0},o.filterChangeSpeed);u.find(".mega-entry-innerwrap").transition({scale:1,opacity:1,perspective:"10000px",rotateX:"0deg"},o.filterChangeSpeed)}else if(o.filterChangeAnimation=="scale"){u.transition({scale:o.filterChangeScale,opacity:0,rotate:0},o.filterChangeSpeed);u.find(".mega-entry-innerwrap").transition({scale:1,opacity:1,perspective:"10000px",rotateX:"0deg"},o.filterChangeSpeed)}else if(o.filterChangeAnimation=="rotate"){u.transition({scale:1,opacity:0,rotate:f},o.filterChangeSpeed);u.find(".mega-entry-innerwrap").transition({scale:1,opacity:1,perspective:"10000px",rotateX:"0deg"},o.filterChangeSpeed)}else if(o.filterChangeAnimation=="rotatescale"){u.transition({scale:o.filterChangeScale,opacity:0,rotate:f},o.filterChangeSpeed);u.find(".mega-entry-innerwrap").transition({scale:1,opacity:1,perspective:"10000px",rotateX:"0deg"},o.filterChangeSpeed)}else if(o.filterChangeAnimation=="pagetop"||o.filterChangeAnimation=="pagebottom"||o.filterChangeAnimation=="pagemiddle"){u.find(".mega-entry-innerwrap").removeClass("pagemiddle").removeClass("pagetop").removeClass("pagebottom").addClass(o.filterChangeAnimation);u.transition({opacity:0},o.filterChangeSpeed);u.find(".mega-entry-innerwrap").transition({scale:1,opacity:0,perspective:"10000px",rotateX:"90deg"},o.filterChangeSpeed)}}setTimeout(function(){u.css({visibility:"hidden"})},o.filterChangeSpeed)},a*o.delay/2);a++}})}function o(n){var r=n.data("ie");var i=n.data("ie9");var s=n.data("opt");if(s.filterChangeSpeed==t)s.filterChangeSpeed=Math.round(Math.random()*500+100);if(s.filterChangeScale==t)s.filterChangeScale=.8;var o=0;var u=0;n.find(">.mega-entry").each(function(n){var o=e(this);var u=s.filterChangeRotate;if(u==t)u=30;if(u==99)u=Math.round(Math.random()*360);if(r||i){o.css({opacity:0})}else{if(s.filterChangeAnimation=="fade")o.transition({scale:1,opacity:0,rotate:0,duration:1,queue:false});else if(s.filterChangeAnimation=="scale"){o.transition({scale:s.filterChangeScale,opacity:0,rotate:0,duration:1,queue:false})}else if(s.filterChangeAnimation=="rotate")o.transition({scale:1,opacity:0,rotate:u,duration:1,queue:false});else if(s.filterChangeAnimation=="rotatescale"){o.transition({scale:s.filterChangeScale,opacity:0,rotate:u,duration:1,queue:false})}else if(s.filterChangeAnimation=="pagetop"||s.filterChangeAnimation=="pagebottom"||s.filterChangeAnimation=="pagemiddle"){o.find(".mega-entry-innerwrap").addClass(s.filterChangeAnimation);o.transition({opacity:0,duration:1,queue:false});o.find(".mega-entry-innerwrap").transition({scale:1,opacity:1,perspective:"10000px",rotateX:"90deg",duration:1,queue:false})}}})}function u(t,n){if(n==0){var r=new Array}else var r=t.data("lastorder");var i=t.width();var s=t.data("order");if(n>s.length-1)n=0;var o=t.find(">.mega-entry.tp-notordered");var a=12;if(o.length<9)a=o.length;var l=s[n];if(s[n]==0||l<2||l>17)if(e.browser.msie&&parseInt(e.browser.version,0)<9){l=9}else{l=Math.round(Math.random()*a+1)}if(l<2)l=2;if(l>17)l=17;r.push(l);var c=l;if(l==10||l==14)c=3;if(l==11||l==15)c=4;if(l==12||l==16)c=5;if(l==13||l==17)c=6;if(l==11||l==12||l==13||l==15||l==16||l==17)if(i<840&&i>721)c=4;else if(i<720)c=3;o.slice(0,c).each(function(t){var n=e(this);n.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");n.addClass("tp-ordered tp-layout");n.data("layout",l);n.data("child",t);if(t==0)n.addClass("tp-layout-first-item");if(t==c-1){n.addClass("tp-layout-last-item")}n.removeClass("tp-notordered")});n=n+1;t.data("lastorder",r);if(t.find(">.mega-entry.tp-notordered").length>0)u(t,n);else{f(t).addClass("very-last-item");return t}}function a(t,n,r){if(n==0){var i=new Array}else var i=t.data("lastorder");var s=t.width();var o=t.data("order");if(n>o.length-1)n=0;var u=t.find(">.mega-entry.tp-ordered");var l=12;if(u.length<9)l=u.length;var h=o[n];if(o[n]==0||h<2||h>17)if(e.browser.msie&&parseInt(e.browser.version,0)<9){h=9}else{h=Math.round(Math.random()*l+1)}if(h<2)h=2;if(h>17)h=17;i.push(h);var p=h;if(h==10||h==14)p=3;if(h==11||h==15)p=4;if(h==12||h==16)p=5;if(h==13||h==17)p=6;if(h==11||h==12||h==13||h==15||h==16||h==17)if(s<840&&s>721)p=4;else if(s<720)p=3;var d=u.length-r;u.slice(d,d+p).each(function(t){var n=e(this);n.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");n.addClass("tp-ordered tp-layout");n.data("layout",h);n.data("child",t);if(t==0)n.addClass("tp-layout-first-item");if(t==p-1){n.addClass("tp-layout-last-item")}n.removeClass("tp-notordered")});n=n+1;t.data("lastorder",i);r=r-p;if(r>0)a(t,n,r);else{f(t).addClass("very-last-item");c(t);return t}}function f(t){var n;t.find(">.mega-entry.tp-layout.tp-ordered").each(function(){n=e(this)});return n}function l(e){return e}function c(n,r){var i=0;var s=n.data("defaultwidth");var o=n.data("opt");var u=o.delay;var a=0;if(o.firststart==1){a=1;o.firststart=0}var f=n.width();var c=f/s;var h=185;var p=n.data("paddingh");var d=n.data("paddingv");var v=1;var m=1;var g=n.data("ie");var y=n.data("ie9");var b=5*c;var w=0;var E=l(b*160);var S=l(b*158);var x=l(b*152);var T=l(b*148);var N=l(b*132);var C=l(b*123);var k=l(b*122);var L=l(b*119);var A=l(b*113);var O=l(b*112);var M=l(b*98);var _=l(b*84);var D=l(b*83);var P=l(b*79);var H=l(b*78);var B=l(b*77);var j=l(b*74);var F=l(b*73);var I=l(b*69);var q=l(b*68);var R=l(b*67);var U=l(b*65.3);var z=l(b*49);var W=l(b*48);var X=l(b*45);var V=l(b*44);var J=l(b*39.2);var K=l(b*39);var Q=l(b*38);var G=l(b*37);var Y=l(b*36);var Z=l(b*32.66);var et=l(b*222);var tt=T;var nt=l(b*111);var rt=j;var it=F;var st=z;var ot=W;var ut=G;var at=Y;var ft=new Array(0,0,0,0,0,0,0,0,0);var lt=new Array(0,0,0,0,0,0,0,0,0);var ct=0;var ht=0;var pt=n.find(">.mega-entry.tp-layout").length;n.find(">.mega-entry.tp-layout").each(function(n){var r=e(this);var u=r.find(".mega-entry-innerwrap");ht=r.data("layout");if(ht==11||ht==12||ht==13)if(f<840&&f>721)ht=11;else if(f<720)ht=10;if(ht==15||ht==16||ht==17)if(f<840&&f>721)ht=15;else if(f<720)ht=14;var l=500;var c,h,v;var m=p;var b=d;var E=i;var N=ut;if(f>480){if(ht==2){if(f>767){if(r.data("child")==0){c=A;h=rt;v=0;N=rt}if(r.data("child")==1){c=D;h=rt;v=A;m=0;i=i+rt;N=rt}}else{if(f>480&&f<768){if(r.data("child")==0){c=_;h=rt;v=0;N=rt}if(r.data("child")==1){c=O;h=rt;v=_;m=0;i=i+rt;N=rt}}}}if(ht==3){if(f>767){if(r.data("child")==0){c=H;h=rt;v=0;N=rt}if(r.data("child")==1){c=X;h=rt;v=H;N=rt}if(r.data("child")==2){c=F;h=rt;v=C;i=i+rt;N=rt;m=0}}else{if(f>480&&f<768){if(r.data("child")==0){c=j;h=rt;v=0;N=rt}if(r.data("child")==1){c=H;h=rt;v=j;N=rt}if(r.data("child")==2){c=V;h=rt;v=x;N=rt;i=i+rt;m=0}}}}if(ht==4){if(f>767){if(r.data("child")==0){c=_;h=rt;v=0;N=370}if(r.data("child")==1){c=K;h=ut;v=_}if(r.data("child")==2){c=F;h=rt;v=C;m=0;i=i+ut;N=rt}if(r.data("child")==3){c=K;h=ut;v=_;i=i+ut}}else{if(f>480&&f<768){if(r.data("child")==0){c=K;h=ut;v=_}if(r.data("child")==1){c=_;h=rt;v=0;i=i+ut}if(r.data("child")==2){c=K;h=ut;v=_;i=i-ut}if(r.data("child")==3){c=F;h=rt;v=C;m=0;i=i+rt;N=rt}}}}if(ht==5){if(f>767){if(r.data("child")==0){c=_;h=ut;v=0}if(r.data("child")==1){c=K;h=ut;v=_}if(r.data("child")==2){c=F;h=rt;v=C;m=0;i=i+ut;N=rt}if(r.data("child")==3){c=V;h=ut;v=0}if(r.data("child")==4){c=P;h=ut;v=V;i=i+ut}}else{if(f>480&&f<768){if(r.data("child")==0){c=_;h=ut;v=0}if(r.data("child")==1){c=K;h=ut;v=_}if(r.data("child")==2){c=F;h=ut;v=C;m=0;i=i+ut}if(r.data("child")==3){c=M;h=ut;v=0}if(r.data("child")==4){c=M;h=ut;v=M;m=0;i=i+ut}}}}if(ht==6){if(f>767){if(r.data("child")==0){c=j;h=rt;v=0;N=rt}if(r.data("child")==1){c=X;h=ut;v=j}if(r.data("child")==2){c=B;h=ut;v=L;m=0;i=i+ut}if(r.data("child")==3){c=X;h=ut;v=j}if(r.data("child")==4){c=K;h=ut;v=L}if(r.data("child")==5){c=Q;h=ut;v=S;m=0;i=i+ut}}else{if(f>480&&f<768){if(r.data("child")==0){c=X;h=rt;v=0;N=rt}if(r.data("child")==1){c=q;h=rt;v=X;N=rt}if(r.data("child")==2){c=K;h=ut;v=A}if(r.data("child")==3){c=V;h=ut;v=x;m=0;i=i+ut}if(r.data("child")==4){c=K;h=ut;v=A}if(r.data("child")==5){c=V;h=ut;v=x;m=0;i=i+ut}}}}if(ht==7){if(f>767){if(r.data("child")==0){c=A;h=rt;v=0;N=rt}if(r.data("child")==1){c=D;h=ut;v=A;m=0;i=i+ut}if(r.data("child")==2){c=K;h=ut;v=A}if(r.data("child")==3){c=V;h=rt;v=x;m=0;i=i+ut;N=rt}if(r.data("child")==4){c=X;h=ut;v=0}if(r.data("child")==5){c=q;h=ut;v=X}if(r.data("child")==6){c=K;h=ut;v=A;i=i+ut}}else{if(f>480&&f<768){if(r.data("child")==0){c=A;h=rt;v=0;N=rt}if(r.data("child")==1){c=D;h=ut;v=A;m=0;i=i+ut}if(r.data("child")==2){c=K;h=ut;v=A}if(r.data("child")==3){c=V;h=ut;v=x;m=0;i=i+ut}if(r.data("child")==4){c=X;h=ut;v=0}if(r.data("child")==5){c=q;h=ut;v=X}if(r.data("child")==6){c=D;h=ut;v=A;m=0;i=i+ut}}}}if(ht==8){if(f>767){if(r.data("child")==0){c=D;h=ut;v=0}if(r.data("child")==1){c=I;h=rt;v=D;N=rt}if(r.data("child")==2){c=V;h=ut;v=x;m=0;i=i+ut}if(r.data("child")==3){c=K;h=ut;v=0}if(r.data("child")==4){c=V;h=ut;v=K}if(r.data("child")==5){c=V;h=rt;v=x;m=0;i=i+ut;N=ut}if(r.data("child")==6){c=D;h=ut;v=0}if(r.data("child")==7){c=I;h=ut;v=D;i=i+ut}}else{if(f>480&&f<768){if(r.data("child")==0){c=D;h=ut;v=0}if(r.data("child")==1){c=K;h=ut;v=D}if(r.data("child")==2){c=j;h=ut;v=k;m=0;i=i+ut;N=rt}if(r.data("child")==3){c=K;h=ut;v=0}if(r.data("child")==4){c=D;h=ut;v=K}if(r.data("child")==5){c=j;h=rt;v=k;m=0;i=i+ut;N=rt}if(r.data("child")==6){c=D;h=ut;v=0}if(r.data("child")==7){c=K;h=ut;v=D;i=i+ut}}}}if(ht==9){if(f>767){if(r.data("child")==0){c=A;h=rt;v=0;N=rt}if(r.data("child")==1){c=D;h=ut;v=A;m=0;i=i+ut}if(r.data("child")==2){c=K;h=ut;v=A}if(r.data("child")==3){c=V;h=rt;v=x;m=0;i=i+ut;N=rt}if(r.data("child")==4){c=X;h=rt;v=0;N=rt}if(r.data("child")==5){c=q;h=rt;v=X;N=rt}if(r.data("child")==6){c=K;h=ut;v=A;i=i+ut}if(r.data("child")==7){c=K;h=ut;v=A}if(r.data("child")==8){c=V;h=ut;v=x;m=0;i=i+ut}}else{if(f>480&&f<768){if(r.data("child")==0){c=j;h=rt;v=0;N=rt}if(r.data("child")==1){c=W;h=rt;v=j;N=rt}if(r.data("child")==2){c=j;h=rt;v=k;m=0;i=i+rt;N=rt}if(r.data("child")==3){c=W;h=rt;v=0;N=rt}if(r.data("child")==4){c=j;h=rt;v=W;N=rt}if(r.data("child")==5){c=j;h=rt;v=k;m=0;i=i+rt;N=rt}if(r.data("child")==6){c=j;h=rt;v=0;N=rt}if(r.data("child")==7){c=j;h=rt;v=j;N=rt}if(r.data("child")==8){c=W;h=rt;v=T;m=0;i=i+rt;N=rt}}}}if(ht>9&&ht<14){if(ht==10){c=Math.round(U);c=c+m/3}else if(ht==11){c=Math.round(z);c=c+m/4}else if(ht==12){c=Math.round(J);c=c+m/5}else if(ht==13){c=Math.round(Z);c=c+m/6}var h=c;var R=r.data("child");v=c*R;N=h;if(R==2&&ht==10||R==3&&ht==11||R==4&&ht==12||R==5&&ht==13||r.hasClass("tp-layout-last-item")){i=i+h}}if(ht>13&&ht<18){if(ht==14){c=Math.round(U);c=c+m/3}else if(ht==15){c=Math.round(z);c=c+m/4}else if(ht==16){c=Math.round(J);c=c+m/5}else if(ht==17){c=Math.round(Z);c=c+m/6}var R=r.data("child");var G=c/r.data("width");h=r.data("height")*G;v=c*r.data("child");E=ft[R];N=h*G;lt[R]=N;i=E+h;ft[R]=i}}else{h=Math.round(r.data("height")*(f/r.data("width")));c=f;m=0;v=0;E=i;i=i+h}var Y=1;var et=1;var tt=0;var nt=0;var it=o.filterChangeRotate;if(it==t)nt=30;if(it==99)it=Math.round(Math.random()*360);if(r.hasClass(o.filter)||o.filter=="*"){r.css({visibility:"visible"});if(g||y){Y=1;et=1}else{if(o.filterChangeAnimation=="pagetop"||o.filterChangeAnimation=="pagebottom"||o.filterChangeAnimation=="pagemiddle"){nt=0;tt=0;Y=1;et=1;eiscal=1;eiopaa=1;eirx=0}else{Y=1;nt=0;et=1;eiscal=1;eiopaa=1;eirx=0}}}if(o.detailview=="on"&&et==1)et=.4;if(r.hasClass("mega-in-detailview"))et=1;r.removeClass("mega-square").removeClass("mega-portrait").removeClass("mega-landscape");var st=Math.floor(c/100);var ot=Math.floor(h/100);if(st>ot)r.addClass("mega-landscape");if(ot>st)r.addClass("mega-portrait");if(st==ot)r.addClass("mega-square");var at=n*o.delay;if(g||y){r.find(".mega-socialbar").animate({width:c+"px"});r.animate({scale:Y,opacity:et,width:c+"px",height:h+"px",left:v+"px",top:E+"px",paddingBottom:b+"px",paddingRight:m+"px"},{queue:false,duration:400});u.animate({"background-position":"50% 49%","background-size":"cover"},{queue:false,duration:400});if(g){var ct=u.find(".ieimg");var pt=Math.round(r.data("width"))/Math.round(r.data("height"));var dt=Math.round(c)/Math.round(h);var vt=c;var mt=vt/r.data("width")*r.data("height");if(mt<h){mt=h;vt=mt/r.data("height")*r.data("width")}ct.css({width:vt+"px",height:mt+"px"})}}else{var G=f/s*100-16;if(r.data("lowsize")!=t)if(G<=r.data("lowsize"))r.addClass("mega-lowsize");else r.removeClass("mega-lowsize");if(a){at=at+100;r.transition({opacity:0,top:E+"px",left:v+"px",width:c,height:h,paddingBottom:b+"px",paddingRight:m+"px",duration:1,queue:false})}setTimeout(function(){r.transition({scale:Y,opacity:et,rotate:nt,"z-index":1,width:c,height:h,top:E+"px",left:v+"px",paddingBottom:b+"px",paddingRight:m+"px",duration:o.filterChangeSpeed,queue:false});setTimeout(function(){r.find(".mega-entry-innerwrap").transition({scale:eiscal,opacity:eiopaa,perspective:"10000px",rotateX:eirx,duration:o.filterChangeSpeed,queue:false});r.removeClass("mega-entry-added")},50);u.transition({"background-position":"50% 49%","background-size":"cover",duration:o.filterChangeSpeed,queue:false})},at)}if(r.hasClass("very-last-item")&&!r.hasClass("tp-layout-last-item")){i=i+N}else{}if(w<E+h)w=E+h});if(ht>13&&ht<18){i=ft[0];for(allh=0;allh<ft.length;allh++){if(i<ft[allh])i=ft[allh]}}n.css({height:w+"px"})}e.fn.extend({megafoliopro:function(r){var i={filterChangeAnimation:"rotatescale",filterChangeSpeed:400,filterChangeRotate:99,filterChangeScale:.6,delay:20,defaultWidth:980,paddingHorizontal:10,paddingVertical:10,layoutarray:[11],lowSize:50};r=e.extend({},i,r);return this.each(function(){if(!e.support.transition)e.fn.transition=e.fn.animate;var i=r;i.detaiview="off";i.firststart=1;if(i.filter==t)i.filter="*";if(i.delay==t)i.delay=0;var f=e.browser.mozilla&&(parseInt(e.browser.version,0)==13||parseInt(e.browser.version,0)==14||parseInt(e.browser.version,0)==15||parseInt(e.browser.version,0)==16);var l=e.browser.msie&&parseInt(e.browser.version,0)<9;var h=e.browser.msie&&parseInt(e.browser.version,0)==9;i.ie=l;i.ie9=h;if(l)e("body").addClass("ie8");if(h)e("body").addClass("ie9");var p=e(this);p.data("defaultwidth",i.defaultWidth);p.data("paddingh",i.paddingHorizontal);p.data("paddingv",i.paddingVertical);p.data("order",i.layoutarray);p.data("ie",l);p.data("ie9",h);p.data("ff",f);p.data("opt",i);n(p,i);u(p,0);s(p,"*");o(p);u(p,0);setTimeout(function(){c(p)},400);e(window).resize(function(){clearTimeout(p.data("resized"));p.data("resized",setTimeout(function(){a(p,0,p.find(">.mega-entry.tp-ordered").length)},150))});if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)){e(".mega-entry").click(function(){})}})},megamethode:function(t){return this.each(function(){var t=e(this)})},megagetcurrentorder:function(){var t=e(this);return t.data("lastorder")},megaappendentry:function(t){var n=e(this);var i=e(t);i.addClass("mega-entry-added");n.append(i);var o=n.data("opt");r(n,o);u(n,0);c(n,1);setTimeout(function(){s(n,o.filter);u(n,0);c(n,1)},200)},megaremix:function(n){return this.each(function(){var r=e(this);if(n!=t)r.data("order",n);i(r);u(r,0);c(r)})},megafilter:function(t){return this.each(function(){var n=e(this);s(n,t);u(n,0);c(n)})},megaanimchange:function(t,n,r,i){return this.each(function(){var o=e(this);var a=o.data("opt");var f=a.filter;a.filterChangeAnimation=t;a.filterChangeSpeed=n;a.filterChangeRotate=r;a.filterChangeScale=i;s(o,"");s(o,f);setTimeout(function(){u(o,0);c(o)},2*a.filterChangeSpeed);o.data("opt",a)})}})})(jQuery)

